<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            background-color: rgba(249, 243, 224, 0.795);
            display: flex;
            justify-content: center;
            flex-direction: column;
            text-align: center;
        }

        .div_principal{
            display: flex;
            flex-direction: column;
            align-self: center;
            align-items: center;
            width: 500px; 
            height: 500px; 
            background-color: rgba(255, 247, 223, 0.795);
            border-radius: 30px;
            border:  solid 2px #020202;
            font-size: 30px;
            box-shadow: 2px 2px 3px 1px #222;
        }

        .div_principal input{
            width: 170px;
            height: 24px;
        }

        h5{
            margin: 5px;
        }

        button{
            width: 160px;
            height: 40px;
            cursor: pointer; 
            border: solid 2px #000;
            font-family: monospace;
            font-size: 20px;
        }

    </style>
</head>
<body>
    <h2>Calcule o quanto você economizará na conta de luz utilizando o monitoramento do nosso sensor</h2>
    <div class="div_principal">
        Quantidade de lâmpadas:<br>
            <input type="number" id="qtdLampadaDoLocal" placeholder="Ex: 50" min="1"><br>
        
        Potência da lâmpada:<br>
            <input type="number" id="potencia_de_cada_lampada" placeholder="Ex: 25">
            <div id="opcaoNaoSei" style="display: flex; align-items: center;">
                <input style="width: 20px; margin: 7px;"type="radio" value="true" id="naoInformadoPotencia"> 
                    <span style="font-size: 20px;">Não sei
                    </span>
            </div>
        <br>    

        <h5>Horário de funcionamento do seu escritório</h5> 
        
        Abertura: 
            <input type="number" id="aberturaFuncionamento" placeholder="00/23" max="23" min="00">
        Fechamento: 
            <input type="number" id="fechamentoFuncionamento" placeholder="00/23" max="23" min="00"><br>
        <button onclick="calcularGasto()">Calcular</button>
    </div>
    <div id="resultado" style="text-align: center; font-size: 20px; margin-top: 20px;"></div>
    <div id="res2" style="text-align: ceneter; font-size: 20px; margin-top: 20px"></div>
</body>
</html>

<script>
    function calcularGasto(){
        var qtdLampada = Number(qtdLampadaDoLocal.value);
        var potenciaLampada = Number(potencia_de_cada_lampada.value);
        var potenciaNaoInformada = naoInformadoPotencia.value;
        var horarioAbertura= Number(aberturaFuncionamento.value);
        var horarioFechamento= Number(fechamentoFuncionamento.value);

        var tempoFuncionamento = horarioFechamento - horarioAbertura;

        var duranteDia = Number(0);
        var duranteNoite = Number(0);
        
        var hrInicioDia = 7;
        var hrTerminoDia = 17;

        if(qtdLampada > 0){
            if(horarioFechamento > horarioAbertura){

                if(horarioAbertura <= hrInicioDia){ //se o ambiente abre ANTES das 7 horas
                    if(horarioFechamento >= hrTerminoDia){ // se o ambiente fecha DEPOIS das 17 horas
                        duranteDia = hrTerminoDia - hrInicioDia; // se expediente começar antes das 8 e terminar dps das 16 = HrDuranteDia = 17-7
                    }
                    if(horarioFechamento < hrTerminoDia){  // se o ambiente fecha ANTES das 17 horas
                        duranteDia = horarioFechamento - hrInicioDia; // se expediente começar antes das 7 e terminar antes das 17 = HrDuranteDia = fim do expediente - 7
                    }
                }
                if(horarioAbertura > hrInicioDia){ //se o ambiente abre DEPOIS das 7 horas
                    if(horarioFechamento >= hrTerminoDia){ // se o ambiente fecha DEPOIS das 17 horas
                        duranteDia = hrTerminoDia - horarioAbertura; // se expediente começar depois das 7 e terminar dps das 17 = HrDuranteDia = 17 - inicio expediente
                    }
                    if(horarioFechamento < hrTerminoDia){ // se o ambiente fecha DEPOIS das 17horas
                        duranteDia = horarioFechamento - horarioAbertura; // se expediente começar depois das 7 e terminar antes das 17
                    }
                }
            }
            else{
                alert(`Horário de funcionamento invalido`);
                var funInv = true;
            }
        }
        else{
            alert(`Quantidade de lampadas invalido`);
            var funInv = true;
        }

        var verificarWatts = document.getElementsByName("verWatts");
        if(verificarWatts.checked){
            watts = 30;
        }

        duranteNoite =  tempoFuncionamento - duranteDia;

            //alert(HrDuranteDia+"\n"+HrDuranteNoite);               

            // kWh diário consumido pela empresa
            // var kWhDiario = (watts * qntLampadas * hrTotal) / 1000; 
            // kWh mensal consumido pela empresa
            // var kWhMensal = kWhDiario * 26;
            // Gasto mensal durante o dia e noite da empresa

        gastoMensalAoDia = (((duranteDia * qtdLampada * potenciaLampada) / 1000) * 27) * 0.85;  // 27 = dias do mes. 0.85 = valor por kWh
        gastoMensalAoNoite = (((duranteNoite * qtdLampada * potenciaLampada) / 1000) * 27) * 0.85;
        var gastoDesconto = (gastoMensalAoDia * 0.50) + (gastoMensalAoNoite * 0.1);
        var economiaAnual = gastoDesconto * 12;

        if(funInv == true){
            resultado.innerHTML = `Recarregue a página e tente novamente com valores válidos`;
        }
        else{
            resultado.innerHTML =   `Tempo de funcionamento: ${tempoFuncionamento}h <br>
                                Com a nossa ferramenta você pode economizar até 50% dos gastos durante o dia e 10% durante a noite, 
                                o que equivale a R$${gastoDesconto.toFixed(2)} por mês!<br>
                                Gerando assim uma economia média de: <b style="color:green">R$${economiaAnual.toFixed(2)}</b> ANUAL.<br><br>
                                Valores baseados em ${potenciaLampada}watts por lâmpada.<br><br>
                                Não possui lâmpadas inteligentes? Clique <a href="#" onclick="calcLampadasInte()">aqui</a>`;
            }
            
            console.log(potenciaLampada);
        }

        function calcLampadasInte(){
            var qntLampadas = Number(qtdLampadaDoLocal.value);
            if(qntLampadas<=30){
                res2.innerHTML = `Você gastará em média R$${qntLampadas*35} para trocar todas as lâmpadas da sua empresa. Ou seja em ${parseInt((qntLampadas*35)/(gastoMensalAoDia * 0.50 + gastoMensalAoNoite * 0.10))} meses você começará a ter lucro.`;
            }
            else{
                res2.innerHTML = `Você gastará em média R$${qntLampadas*25} para trocar todas as lâmpadas da sua empresa. Ou seja em <span style="color: green;">${parseInt((qntLampadas*25)/(gastoMensalAoDia * 0.50 + gastoMensalAoNoite * 0.10))}</span> meses você começará a ter lucro.`;
            }
        }
</script>